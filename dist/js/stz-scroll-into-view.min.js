(function(){var e;e=angular.module("stz.scroll.into.view",[]),e.directive("stzLastRepeat",function(){return{restrict:"A",require:"^?stzScrollIntoView",link:function(e,t,n,o){e.$last&&(null!==o?"function"==typeof o.onStzNgRepeatFinished&&o.onStzNgRepeatFinished(t,n):e.$emit("stzNgRepeatFinished",t,n))}}}),e.directive("stzImageLoad",["$timeout",function(e){return{restrict:"A",require:"^?stzScrollIntoView",link:function(t,n,o,a){var r,i,l;l=o.stzImageLoad,r=function(){return null===a?e(function(){return t.$emit("stzNgSrcImageLoaded",n,l)},0):"function"==typeof a.onStzNgSrcImageLoaded?e(function(){return a.onStzNgSrcImageLoaded(n,l)},0):void 0},i=function(e){return e&&(n.unbind("load"),n.unbind("error")),"img"!==n[0].tagName.toLowerCase()?r():n[0].complete?r():(n.bind("load",function(){r()}),n.bind("error",function(){r()}))},o.ngSrc?o.$observe("ngSrc",function(){return i(!0)}):i(!1)}}}]),e.directive("stzScrollIntoView",["$timeout",function(e){var t,n;return n={IS_DEFAULT_WATCHER_PARAM:null,IS_IMAGES:null,IS_NG_REPEAT:null,SCROLL_TO_ELEMENT:null,PARENT_ID:null,SCOPE:null},t={imagesLoaded:0,ngRepeated:!1,imgLoaded:!1,defaultParamChanged:!1,allImages:0,watchers:{ngRepeatLoad:{on:angular.noop},imagesLoad:{on:angular.noop}},init:function(){switch(!1){case!!n.IS_DEFAULT_WATCHER_PARAM:switch(!1){case!n.IS_NG_REPEAT:n.IS_IMAGES&&t.initImagesLoadWatcher(function(){t.setImgLoaded(),t.ngRepeated&&t.defaultParamChanged&&t.scrollToElementView()}),t.initNgRepeatLoadWatcher(function(){n.IS_IMAGES&&t.setAllImagesLength(),t.setNgRepeated(),t.defaultParamChanged&&t.scrollToElementView()});break;case!n.IS_IMAGES:t.setAllImagesLength(),t.initImagesLoadWatcher(function(){t.setImgLoaded(),t.defaultParamChanged&&t.scrollToElementView()})}return t.initDefaultWatcher(function(){var e;return t.defaultParamChanged||t.setDefaultParamChanged(),e=function(){switch(!1){case!n.IS_NG_REPEAT:if(n.IS_IMAGES){if(t.ngRepeated&&t.imgLoaded)return t.scrollToElementView()}else if(t.ngRepeated)return t.scrollToElementView();break;case!n.IS_IMAGES:if(t.imgLoaded)return t.scrollToElementView();break;default:return t.scrollToElementView()}}()});case!n.IS_NG_REPEAT:return n.IS_IMAGES&&t.initImagesLoadWatcher(function(){return t.setImgLoaded(),t.scrollToElementView()}),t.initNgRepeatLoadWatcher(function(){return n.IS_IMAGES&&t.setAllImagesLength(),t.setNgRepeated()});case!n.IS_IMAGES:return t.setAllImagesLength(),t.initImagesLoadWatcher(function(){return t.setImgLoaded(),t.scrollToElementView()});default:return t.scrollToElementView()}},initImagesLoadWatcher:function(n){return t.watchers.imagesLoad.on=function(o,a){return e(function(){return"stz-s-i-v-ele"===a&&0!==+t.allImages&&++t.imagesLoaded===+t.allImages?n():void 0},0,!1)}},initNgRepeatLoadWatcher:function(n){return t.watchers.ngRepeatLoad.on=function(t,o){return e(function(){return n()},0,!1)}},initDefaultWatcher:function(e){return n.SCOPE.$watch("scrollParam",function(t){return angular.isDefined(t)?e():void 0})},setAllImagesLength:function(){return t.allImages=document.querySelectorAll("[stz-s-i-v-ele]").length},setNgRepeated:function(){return t.ngRepeated=!0},setImgLoaded:function(){return t.imgLoaded=!0},setDefaultParamChanged:function(){return t.defaultParamChanged=!0},scrollToElementView:function(){if(n.SCROLL_TO_ELEMENT=document.querySelector("[stz-s-i-v-ele='"+(n.IS_DEFAULT_WATCHER_PARAM?"true":n.SCOPE.scrollParam)+"']"),null!=n.SCROLL_TO_ELEMENT){switch(n.SCROLL_TO_ELEMENT.scrollIntoView(!0),!1){case"string"!=typeof n.PARENT_ID:document.querySelector(n.PARENT_ID).scrollTop=0;break;case"object"!=typeof n.PARENT_ID:"number"==typeof n.PARENT_ID.scrollTop?n.PARENT_ID.scrollTop=0:document.body.scrollTop=0;break;default:document.body.scrollTop=0}return t.imagesLoaded=0}}},{restrict:"A",scope:{scrollParam:"=stzScrollIntoView"},controller:["$scope",function(e){this.onStzNgRepeatFinished=function(e,n){return t.watchers.ngRepeatLoad.on(e,n)},this.onStzNgSrcImageLoaded=function(e,n){return t.watchers.imagesLoad.on(e,n)}}],link:function(e,o,a){n.IS_DEFAULT_WATCHER_PARAM="string"==typeof a.stzScrollIntoView&&""!==a.stzScrollIntoView?!1:!0,n.IS_IMAGES="undefined"!=typeof a.stzSIVImg?!0:!1,n.IS_NG_REPEAT="undefined"!=typeof a.stzSIVNgRepeat?!0:!1,n.PARENT_ID=a.stzSIVParentId||o[0].parentNode,n.SCOPE=e,t.init()}}}])}).call(this);